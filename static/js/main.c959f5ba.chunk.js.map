{"version":3,"sources":["QuestService.js","Trader.js","QuestLog.js","index.js"],"names":["base58Characters","split","UpdateQuest","quest","traderName","traders","a","selectedTrader","selectTrader","activeQuest","quests","find","q","name","state","updateState","trader","sharedResponse","reduce","uri","guy","guyIndex","characters","map","questIndex","length","Error","undefined","filter","char","join","shareUrl","URL","window","location","origin","searchParams","set","history","replaceState","href","AppStarter","fetch","cache","then","response","json","data","catch","err","console","log","search","stateParam","URLSearchParams","substring","get","numberRegex","x","group","test","Number","indexOf","LoadProgress","Box","styled","div","select","onClick","src","avatar","alt","updateQuest","key","objectives","Fragment","TraderWrapper","BackgroundBlur","App","useState","setTraders","pickTrader","updatedTraders","useEffect","r","Trader","QuestLog","render","document","getElementById"],"mappings":"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","file":"static/js/main.c959f5ba.chunk.js","sourcesContent":["// List of characters that are valid in a URL\r\nconst base58Characters = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_+!*$\".split('');\r\n\r\nexport function GetQuests() {\r\n  return fetch('./data.json', { cache: \"force-cache\" })\r\n  .then(response => response.json())\r\n  .then(data => {\r\n    return data;\r\n  }).catch((err) => console.log(err));\r\n}\r\n\r\nexport async function UpdateQuest(quest, traderName, traders) {\r\n  const selectedTrader = selectTrader(traders, traderName);\r\n   const activeQuest = selectedTrader.quests.find((q) => q.name === quest.name);\r\n   activeQuest.state = !activeQuest.state;\r\n   updateState(traders);\r\n\r\n   return [...traders];\r\n}\r\n\r\nfunction ShareProgress(data) {\r\n  return data.reduce((uri, guy, guyIndex) => {\r\n    const characters = guy.quests\r\n        .map((quest, questIndex) => {\r\n          if (questIndex > base58Characters.length) {\r\n            throw new Error(\"Index too high, can't be mapped to a base58 character\")\r\n          }\r\n\r\n          return quest.state ? base58Characters[questIndex] : undefined\r\n        })\r\n        .filter((char) => char !== undefined);\r\n\r\n    // Exclude guys without quest modifications, making the URI smaller\r\n    if (characters.length === 0) {\r\n      return uri\r\n    }\r\n\r\n    return uri + `${guyIndex}${characters.join('')}`\r\n  }, \"\")\r\n}\r\n\r\nexport function LoadProgress(uri, data) {\r\n  const numberRegex = /(\\d+)/;\r\n  let guyIndex = 0;\r\n\r\n  // you have to account for indexes that are above 9 and thus have multiple characters\r\n  for (const group of uri.split(numberRegex).filter(x => x !== '' && x !== undefined)) {\r\n    if (numberRegex.test(group)) {\r\n      guyIndex = Number(group)\r\n    } else {\r\n      for (const char of group.split('')) {\r\n        const questIndex = base58Characters.indexOf(char);\r\n        if (questIndex === -1) {\r\n          throw new Error('Invalid URI supplied, character not recognized')\r\n        }\r\n\r\n        if (!data[guyIndex]) {\r\n          throw new Error('Invalid index for guy')\r\n        }\r\n\r\n        data[guyIndex].quests[questIndex].state = true\r\n      }\r\n    }\r\n  }\r\n\r\n  return data\r\n}\r\n\r\nfunction selectTrader(traders, traderName) {\r\n  return traders.find((trader) => {\r\n    return trader.name === traderName;\r\n  });\r\n}\r\n\r\nexport function updateState(traders) {\r\n  const sharedResponse = ShareProgress(traders);\r\n  let shareUrl = new URL(`${window.location.origin}/tarkov-questlog`);\r\n  shareUrl.searchParams.set('state', sharedResponse);\r\n  window.history.replaceState('', '', shareUrl.href);\r\n}\r\n\r\nexport function AppStarter() {\r\n  return GetQuests().then((traders) => {\r\n    if (window.location.search.length > 0) {\r\n      const stateParam = new URLSearchParams(window.location.search.substring(1));\r\n      if (stateParam.get('state').length > 0) {\r\n        return LoadProgress(stateParam.get('state'), traders);\r\n      }\r\n      return traders;\r\n    }\r\n    return traders;\r\n  })\r\n}\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Box = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  margin: 0 3px;\r\n  &:hover {\r\n    img {\r\n      box-shadow: 2px 2px 18px 0px rgba(255,255,255,1);\r\n    }\r\n  }\r\n`;\r\n\r\nexport default ({ trader, select }) => {\r\n  return (\r\n    <Box onClick={() => select(trader)}>\r\n      <img src={trader.avatar} alt={trader.name} />\r\n      <p>{trader.name}</p>\r\n    </Box>\r\n  )\r\n};\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Box = styled.div`\r\n  border: 1px solid blue;\r\n`;\r\n\r\nexport default ({ quests, traderName, updateQuest }) => {\r\n  return (\r\n    <div>\r\n      {quests.length > 0 ? quests.map((quest) => {\r\n        return !quest.state ? (\r\n            <Box key={quest.name} onClick={() => updateQuest(quest, traderName)}>\r\n              <p>{quest.name}</p>\r\n              {quest.objectives.map((q) => <p key={q}>{q}</p>)}\r\n              {quest.state ? <p>True</p> : <p>False</p>}\r\n            </Box>\r\n        ) : null\r\n      }) : <p>We have no quests yet for this trader</p>}\r\n      <p>Completed Quests</p>\r\n      {quests.length > 0 ? quests.map((quest) => {\r\n        return quest.state ? (\r\n            <Box key={quest.name + 'completed'} onClick={() => updateQuest(quest, traderName)}>\r\n              <p>{quest.name}</p>\r\n              {quest.objectives.map((q) => <p key={q}>{q}</p>)}\r\n              {quest.state ? <p>True</p> : <p>False</p>}\r\n            </Box>\r\n        ) : null\r\n      }) : <React.Fragment />}\r\n    </div>\r\n  )\r\n};\r\n","import React, { useState, useEffect } from 'react';\nimport { render } from 'react-dom';\nimport styled from 'styled-components';\nimport './style.css';\nimport {UpdateQuest, AppStarter} from './QuestService';\nimport Trader from './Trader';\nimport QuestLog from './QuestLog';\n\nconst TraderWrapper = styled.div`\n  position: relative;\n  z-index: 2;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  max-width: 600px;\n  color: #fff;\n  margin: 0 auto;\n`;\n\nconst BackgroundBlur = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 100vw;\n  height: 100vh;\n  background-image: url(\"./background.png\");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  filter: blur(5px);\n`;\n\nfunction App() {\n  const [traders, setTraders] = useState([]);\n  const [selectedTrader, selectTrader] = useState(null);\n\n  async function pickTrader(trader) {\n    selectTrader(trader);\n  }\n\n  async function updateQuest(quest, traderName) {\n    await UpdateQuest(quest, traderName, traders).then((updatedTraders) => {\n      setTraders(updatedTraders);\n    })\n  }\n\n  useEffect(() => {\n    AppStarter().then((r) => setTraders(r));\n  }, []);\n\n  return (\n    <React.Fragment>\n      <TraderWrapper>\n        {traders.map((trader) => {\n          return (\n            <Trader key={trader.name} trader={trader} select={pickTrader} />\n          )\n        })}\n\n        {selectedTrader ? <QuestLog quests={selectedTrader.quests} traderName={selectedTrader.name} updateQuest={updateQuest} /> : <p>Pick a trader</p>}\n      </TraderWrapper>\n      <BackgroundBlur />\n    </React.Fragment>\n  );\n}\n\nrender(<App />, document.getElementById('root'));\n"],"sourceRoot":""}